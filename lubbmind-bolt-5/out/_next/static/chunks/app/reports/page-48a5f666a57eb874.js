(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{2803:function(e,t,i){Promise.resolve().then(i.bind(i,2590))},2590:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return j}});var a=i(7437),n=i(3949),r=i(6070),s=i(5375),d=i(5036),o=i(8250);let l={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}};var m=i(2050);let u={date:(0,m.l)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,m.l)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,m.l)({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},c={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd’hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"};var h=i(8172);let f=["MMM","MMMM"],p={preprocessor:(e,t)=>1!==e.getDate()&&t.some(e=>e.isToken&&f.includes(e.value))?t.map(e=>e.isToken&&"do"===e.value?{isToken:!0,value:"d"}:e):t,ordinalNumber:(e,t)=>{let i;let a=Number(e),n=null==t?void 0:t.unit;return 0===a?"0":(i=1===a?n&&["year","week","hour","minute","second"].includes(n)?"\xe8re":"er":"\xe8me",a+i)},era:(0,h.Y)({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:(0,h.Y)({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,h.Y)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:(0,h.Y)({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:(0,h.Y)({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})};var v=i(5186);let x={code:"fr",formatDistance:(e,t,i)=>{let a;let n=l[e];return(a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",String(t)),null==i?void 0:i.addSuffix)?i.comparison&&i.comparison>0?"dans "+a:"il y a "+a:a},formatLong:u,formatRelative:(e,t,i,a)=>c[e],localize:p,match:{ordinalNumber:(0,i(2540).y)({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e)}),era:(0,v.t)({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:(0,v.t)({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,v.t)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,v.t)({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,v.t)({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};function j(){let{t:e}=(0,n.$G)(),{appointments:t}=(0,s.z)("clinic_1"),i=new Date,l=function(e,t){let i=(0,d.Q)(e,void 0);return i.setDate(1),i.setHours(0,0,0,0),i}(i),m=function(e,t){let i=(0,d.Q)(e,void 0),a=i.getMonth();return i.setFullYear(i.getFullYear(),a+1,0),i.setHours(23,59,59,999),i}(i),u=t.filter(e=>{let t=new Date(e.date);return t>=l&&t<=m}),c=u.filter(e=>"completed"===e.status),h=3e3*c.length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:e("reports")}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Rapports et statistiques de la clinique"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Rendez-vous ce mois"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:u.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,o.WU)(i,"MMMM yyyy",{locale:x})})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Consultations termin\xe9es"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:c.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ce mois-ci"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Revenus estim\xe9s"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[h.toLocaleString()," DA"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Bas\xe9 sur les consultations termin\xe9es"})]})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Statistiques par statut"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:["pending","confirmed","waiting","completed"].map(t=>{let i=u.filter(e=>e.status===t).length,n=u.length>0?(i/u.length*100).toFixed(1):0;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"capitalize",children:e(t)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[n,"%"]}),(0,a.jsx)("span",{className:"font-medium",children:i})]})]},t)})})})]})]})}},6070:function(e,t,i){"use strict";i.d(t,{Ol:function(){return d},Zb:function(){return s},aY:function(){return l},ll:function(){return o}});var a=i(7437),n=i(2265),r=i(4508);let s=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...n})});s.displayName="Card";let d=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",i),...n})});d.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",i),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",i),...n})}).displayName="CardDescription";let l=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",i),...n})});l.displayName="CardContent",n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",i),...n})}).displayName="CardFooter"},5375:function(e,t,i){"use strict";i.d(t,{z:function(){return d}});var a=i(2265),n=i(5978),r=i(7293),s=i(8250);function d(e){let[t,i]=(0,a.useState)([]),[d,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!e)return;let t=(0,n.IO)((0,n.hJ)(r.db,"appointments"),(0,n.ar)("clinicId","==",e),(0,n.Xo)("date","desc"),(0,n.Xo)("time","asc")),a=(0,n.cf)(t,e=>{i(e.docs.map(e=>{var t,i;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(i=e.data().updatedAt)||void 0===i?void 0:i.toDate()}})),o(!1)});return()=>a()},[e]);let l=async(e,i)=>{let a=(0,n.JU)(r.db,"appointments",e);if(await (0,n.r7)(a,{status:i,updatedAt:n.EK.now()}),"confirmed"===i){let i=t.find(t=>t.id===e);i&&await (0,n.ET)((0,n.hJ)(r.db,"patients"),{name:i.patientName,surname:i.patientSurname,phoneNumber:i.phoneNumber,clinicId:i.clinicId,createdAt:n.EK.now()})}};return{appointments:t,loading:d,addAppointment:async t=>{let i=(0,n.IO)((0,n.hJ)(r.db,"appointments"),(0,n.ar)("clinicId","==",e),(0,n.ar)("date","==",t.date),(0,n.ar)("time","==",t.time),(0,n.ar)("status","in",["pending","confirmed","waiting"]));if(!(await (0,n.PL)(i)).empty)throw Error("timeSlotTaken");let a=n.EK.now();await (0,n.ET)((0,n.hJ)(r.db,"appointments"),{...t,createdAt:a,updatedAt:a})},updateAppointmentStatus:l,getTodayAppointments:()=>{let e=(0,s.WU)(new Date,"yyyy-MM-dd");return t.filter(t=>t.date===e)},getAppointmentsByStatus:e=>t.filter(t=>t.status===e)}}},7293:function(e,t,i){"use strict";i.d(t,{db:function(){return d}});var a=i(738),n=i(5978),r=i(1466);let s=(0,a.ZF)({apiKey:"AIzaSyDummy_Key_For_Build_Only",authDomain:"lubbmind.firebaseapp.com",projectId:"lubbmind",storageBucket:"lubbmind.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abc123def456"}),d=(0,n.ad)(s);(0,r.v0)(s)},4508:function(e,t,i){"use strict";i.d(t,{cn:function(){return r}});var a=i(1994),n=i(3335);function r(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[609,210,478,441,250,971,117,744],function(){return e(e.s=2803)}),_N_E=e.O()}]);